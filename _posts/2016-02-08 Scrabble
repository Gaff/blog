public class K{static String[]C;int r,i,j,x,y;public static void main(String[]a){
C=(a[0]).split(";");new K();}K(){C[1].chars().forEach(c->{c-=48;r=c<0?i:r;i=c<0?0:i*10+c;});if(C[2].charAt(0)<'v'){x=r;r=i;i=x;}
i+=16*(r>8?16-r:r);x=1;"yi+5;-+:==B:%5:-:5*URb===E5%55+5:-C".chars().forEach(c->{if(j>=i&&j<=i+C[0].length()/2){x*=c&3;y+=c&4;}
j+=c/13;});i=1;System.out.printf("%d,%d\n",g(),g());}int g(){i=-i;j=0;return(C[0].chars().filter(c->c>45).map(c->("BDDCBECEBIFBDBBDKBBBBEEIEKAAAAA".charAt(c-65)-65)*i)
.peek(c->j+=c).sorted().limit(y/4).sum()*(r%4==2?2:1)+j)*x*i;}}
